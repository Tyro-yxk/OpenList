System.register(["./index-legacy-CEiNF2du.js"],function(e,r){"use strict";var t,n,a,u,s,c,g,i,o,l,d,h,f,y,p,b,v,x,w,_,m;return{setters:[e=>{t=e.g,n=e.b8,a=e.bq,u=e.A,s=e.C,c=e.S,g=e.ag,i=e.c0,o=e.l,l=e.aJ,d=e.aa,h=e.af,f=e.aD,y=e.I,p=e.J,b=e.an,v=e.a5,x=e.q,w=e.bt,_=e.ba,m=e.da}],execute:function(){e("default",()=>{const{back:e}=t(),[r,q]=n(()=>a.post("/auth/2fa/generate")),$=o(),[k,I]=u(),[S,C]=u("");(async()=>{if(v().otp)return x.warning($("users.2fa_already_enabled")),void e();const r=await q();w(r,I)})();const[D,J]=n(()=>a.post("/auth/2fa/verify",{code:S(),secret:k()?.secret})),j=async()=>{const r=await J();_(r,()=>{m({...v(),otp:!0}),e()})};return s(b,{get loading(){return r()},get children(){return s(c,{get when(){return k()},get children(){return s(g,{spacing:"$2",alignItems:"start",get children(){return[s(i,{get children(){return $("users.scan_qr")}}),s(l,{boxSize:"$xs",rounded:"$lg",get src(){return k()?.qr}}),s(i,{get children(){return[d(()=>$("users.or_manual")),":"," ",s(h,{get color(){return f()},get children(){return k()?.secret}})]}}),s(y,{maxW:"$xs",get placeholder(){return $("users.input_code")},get value(){return S()},onInput:e=>C(e.currentTarget.value),onKeyDown:e=>{"Enter"===e.key&&j()}}),s(p,{get loading(){return D()},onClick:j,get children(){return $("users.verify")}})]}})}})}})})}}});
