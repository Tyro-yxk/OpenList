import{bU as z,O as I,g as L,C as t,av as f,S as d,dT as m,aZ as _,aL as D,aP as v,aD as T,af as l,o as A,cD as B,cE as K,dy as W,ap as E,cC as U,cO as F,bT as S,Z as k,aa as b,au as H,A as x,B as R,a$ as G,dU as V,dV as Z,dW as y,P as h,l as J,dX as Q,Q as X,a3 as Y,dY as q,ag as N}from"./index-J7bKldot.js";import{b as p}from"./style-Gt01vKPU.js";import{n as ee,t as $,u as te,s as ne}from"./storage-D_MY-bv8.js";import{J as re}from"./index-_li94QwA.js";import{O as C,g as ae}from"./icon-DrZPxU51.js";import{I as P,u as O}from"./helper-B3dnanCe.js";const r=[{name:"name",textAlign:"left",w:{"@initial":"76%","@md":"50%"}},{name:"size",textAlign:"right",w:{"@initial":"24%","@md":"17%"}},{name:"modified",textAlign:"right",w:{"@initial":0,"@md":"33%"}}],ie=e=>{const{isHide:u}=z();if(u(e.obj))return null;const{setPathAs:g}=I(),{show:o}=p({id:1}),{pushHref:s,to:c}=L(),{openWithDoubleClick:i,toggleWithClick:a,restoreSelectionCache:w}=O(),j=()=>A.list_item_filename_overflow;return t(H.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.2},style:{width:"100%"},get children(){return t(f,{get classList(){return{selected:!!e.obj.selected}},class:"list-item viselect-item",get"data-index"(){return e.index},w:"$full",p:"$2",rounded:"$lg",transition:"all 0.3s",get _hover(){return{transform:"scale(1.01)",bgColor:k()}},as:re,get href(){return e.obj.name},get cursor(){return i()||a()?"default":"pointer"},get bgColor(){return b(()=>!!e.obj.selected)()?k():void 0},"on:dblclick":()=>{i()&&(m(e.index,!0,!0),c(s(e.obj.name)))},"on:click":n=>{if(n.preventDefault(),!i()&&!(n.ctrlKey||n.metaKey||n.shiftKey)&&w()){if(a())return m(e.index,!e.obj.selected);c(s(e.obj.name))}},onMouseEnter:()=>{g(e.obj.name,e.obj.is_dir,!0)},onContextMenu:n=>{S(()=>{m(e.index,!0,!0)}),o(n,{props:e.obj})},get children(){return[t(f,{class:"name-box",spacing:"$1",get w(){return r[0].w},get children(){return[t(d,{get when(){return _()},get children(){return t(P,{"on:mousedown":n=>{n.stopPropagation()},"on:click":n=>{n.stopPropagation()},get checked(){return e.obj.selected},onChange:n=>{m(e.index,n.target.checked)}})}}),t(D,{class:"icon",boxSize:"$6",get color(){return T()},get as(){return ae(e.obj)},mr:"$1",get cursor(){return e.obj.type!==C.IMAGE?"inherit":"pointer"},"on:click":n=>{e.obj.type===C.IMAGE&&(n.ctrlKey||n.metaKey||n.shiftKey||w()&&(v.emit("gallery",e.obj.name),n.preventDefault(),n.stopPropagation()))}}),t(l,{class:"name",get css(){return{wordBreak:"break-all",whiteSpace:j()==="multi_line"?"unset":"nowrap","overflow-x":j()==="scrollable"?"auto":"hidden",textOverflow:j()==="ellipsis"?"ellipsis":"unset","scrollbar-width":"none","&::-webkit-scrollbar":{display:"none"}}},get title(){return e.obj.name},get children(){return e.obj.name}})]}}),t(d,{get fallback(){return t(l,{class:"size",get w(){return r[1].w},get textAlign(){return r[1].textAlign},get children(){return U(e.obj.size)}})},get when(){return ne(e.obj.mount_details)},get children(){return t(d,{get fallback(){return t(l,{class:"size",get w(){return r[1].w},get textAlign(){return r[1].textAlign},get children(){return $(e.obj.mount_details)}})},get when(){return!E("show_disk_usage_in_plain_text")},get children(){return t(B,{get w(){return r[1].w},class:"disk-usage-percentage",trackColor:"$info3",rounded:"$full",size:"md",get value(){return te(e.obj.mount_details)},get children(){return[t(K,{get color(){return ee(e.obj.mount_details)?"$danger6":"$info6"},rounded:"$md"}),t(W,{class:"disk-usage-text",get children(){return $(e.obj.mount_details)}})]}})}})}}),t(l,{class:"modified",display:{"@initial":"none","@md":"inline"},get w(){return r[2].w},get textAlign(){return r[2].textAlign},get children(){return F(e.obj.modified)}})]}})}})},M=e=>{const u=J(),[g,o]=x(),[s,c]=x(!1);R(()=>{g()&&e.sortCallback(g(),s())});const i=a=>({fontWeight:"bold",fontSize:"$sm",color:"$neutral11",textAlign:a.textAlign,cursor:"pointer",onClick:()=>{a.name===g()?c(!s()):S(()=>{o(a.name),c(!1)})}});return t(f,{class:"title",w:"$full",p:"$2",get children(){return[t(f,{get w(){return r[0].w},spacing:"$1",get children(){return[t(d,{get when(){return b(()=>!e.disableCheckbox)()&&_()},get children(){return t(P,{get checked(){return Z()},get indeterminate(){return V()},onChange:a=>{G(a.target.checked)}})}}),b(()=>b(()=>!!y())()?t(l,h(()=>i(r[0]),{get children(){return y()}})):t(l,h(()=>i(r[0]),{get children(){return u("home.obj.".concat(r[0].name))}})))]}}),t(l,h({get w(){return r[1].w}},()=>i(r[1]),{get children(){return u("home.obj.".concat(r[1].name))}})),t(l,h({get w(){return r[2].w}},()=>i(r[2]),{display:{"@initial":"none","@md":"inline"},get children(){return u("home.obj.".concat(r[2].name))}}))]}})},se=()=>{const e=o=>{var c,i;const s=Array.from((i=(c=o.dataTransfer)==null?void 0:c.items)!=null?i:[]);for(let a=0;a<s.length;a++)if(s[a].kind==="file"){v.emit("tool","upload"),o.preventDefault();break}},{registerSelectContainer:u,captureContentMenu:g}=O();return u(),t(N,{onDragOver:e,"oncapture:contextmenu":g,class:"list viselect-container",w:"$full",spacing:"$1",get children(){return[t(M,{sortCallback:Q}),t(X,{get each(){return Y.objs},children:(o,s)=>t(ie,{obj:o,get index(){return s()}})}),t(d,{get when(){return A.show_count_msg==="visible"},get children(){return t(l,{size:"sm",color:"$neutral11",get children(){return q()}})}})]}})},me=Object.freeze(Object.defineProperty({__proto__:null,ListTitle:M,default:se},Symbol.toStringTag,{value:"Module"}));export{M as L,me as a,r as c};
