System.register(["./index-legacy-CEiNF2du.js","./useTitle-legacy-CQUVmWyg.js","./DeletePopover-legacy-2bByla7g.js","./Wether-legacy-DaU2j3h6.js"],function(e,r){"use strict";var n,t,c,l,s,a,i,u,d,g,o,h,m,b,$,f,p,y,_,v,w,C,k,S,j,x,q;return{setters:[e=>{n=e.g,t=e.b8,c=e.bq,l=e.A,s=e.dr,a=e.C,i=e.av,u=e.J,d=e.l,g=e.am,o=e.ds,h=e.dt,m=e.du,b=e.Q,$=e.dv,f=e.dw,p=e.dx,y=e.bt,_=e.q,v=e.ag,w=e.cB,C=e.aV,k=e.aU,S=e.a4},e=>{j=e.b},e=>{x=e.D},e=>{q=e.W}],execute:function(){const r=e=>{const r=[{name:"general",color:"info"},{name:"guest",color:"neutral"},{name:"admin",color:"accent"}];return a(w,{get colorScheme(){return r[e.role].color},get children(){return r[e.role].name}})},D=e=>{const r=d();return a(i,{spacing:"$0_5",get children(){return a(b,{each:C,children:(n,t)=>a(k,{get label(){return r(`users.permissions.${n}`)},get children(){return a(g,{boxSize:"$2",rounded:"$full",get bg(){return`$${S.can(e.user,t())?"success":"danger"}9`}})}})})}})};e("default",()=>{const e=d();j("manage.sidemenu.users");const{to:w}=n(),[C,k]=t(()=>c.get("/admin/user/list")),[S,W]=l([]),z=async()=>{const e=await k();y(e,e=>W(e.content))};z();const[A,B]=s(e=>c.post(`/admin/user/delete?id=${e}`)),[H,I]=s(e=>c.post(`/admin/user/cancel_2fa?id=${e}`));return a(v,{spacing:"$2",alignItems:"start",w:"$full",get children(){return[a(i,{spacing:"$2",get children(){return[a(u,{colorScheme:"accent",get loading(){return C()},onClick:z,get children(){return e("global.refresh")}}),a(u,{onClick:()=>{w("/@manage/users/add")},get children(){return e("global.add")}})]}}),a(g,{w:"$full",overflowX:"auto",get children(){return a(o,{highlightOnHover:!0,dense:!0,get children(){return[a(h,{get children(){return a(m,{get children(){return[a(b,{each:["username","base_path","role","permission","available"],children:r=>a($,{get children(){return e(`users.${r}`)}})}),a($,{get children(){return e("global.operations")}})]}})}}),a(f,{get children(){return a(b,{get each(){return S()},children:n=>a(m,{get children(){return[a(p,{get children(){return n.username}}),a(p,{get children(){return n.base_path}}),a(p,{get children(){return a(r,{get role(){return n.role}})}}),a(p,{get children(){return a(D,{user:n})}}),a(p,{get children(){return a(q,{get yes(){return!n.disabled}})}}),a(p,{get children(){return a(i,{spacing:"$2",get children(){return[a(u,{onClick:()=>{w(`/@manage/users/edit/${n.id}`)},get children(){return e("global.edit")}}),a(x,{get name(){return n.username},get loading(){return A()===n.id},onClick:async()=>{const r=await B(n.id);y(r,()=>{_.success(e("global.delete_success")),z()})}}),a(u,{colorScheme:"accent",get loading(){return H()===n.id},onClick:async()=>{const r=await I(n.id);y(r,()=>{_.success(e("users.cancel_2fa_success")),z()})},get children(){return e("users.cancel_2fa")}})]}})}})]}})})}})]}})}})]}})})}}});
